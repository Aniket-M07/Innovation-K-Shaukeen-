<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Intelligent Campus Search Engine - University Portal</title>
		<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
	</head>
	<body>
		<!-- Navigation Bar -->
		<nav>
			<div class="nav-container">
				<a href="/" class="logo-container">
				<img src="{{ url_for('static', filename='logo.png') }}" alt="K.R. Mangalam University Logo" class="logo-image">

				</a>
				<ul class="nav-menu">
					<li><a href="#about">About University</a></li>
					<li><a href="#students">Students</a></li>
					<li><a href="#courses">Courses</a></li>
					<li><a href="#contacts">Contacts</a></li>
					<li><span class="search-icon" onclick="scrollToSearch()">ğŸ”</span></li>
					<!-- User Authentication Links -->
					{% if session.get('user_id') %}
						<li style="margin-left: auto; border-left: 1px solid #e2e8f0; padding-left: 1.5rem;">
							<span style="color: #718096; font-size: 0.9rem; margin-right: 1rem;">ğŸ‘¤ {{ session.get('user_name') }} <span style="background: #c41e3a; color: white; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem;">{{ session.get('role') }}</span></span>
							<a href="{{ url_for('logout') }}" style="color: #c41e3a; font-weight: 600;">Logout</a>
						</li>
					{% else %}
						<li style="margin-left: auto; border-left: 1px solid #e2e8f0; padding-left: 1.5rem;">
							<a href="{{ url_for('login') }}" style="color: #2d3748; margin-right: 1rem;">Login</a>
							<a href="{{ url_for('signup') }}" style="color: white; background: #c41e3a; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none;">Sign Up</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</nav>

		<!-- Hero Section -->
		<section class="hero">
			<div class="hero-content">
				<h1>Intelligent Campus Search Engine</h1>
				<p>Fast, powerful search for all campus documents, resources, and academic materials. Find what you need in seconds.</p>
			</div>
		</section>

		<!-- Main Content -->
		<div class="container">
			<!-- Upload Section - Admin Only -->
			{% if session.get('role') == 'Admin' %}
			<section class="card" id="upload-section">
				<h2>ğŸ“¤ Upload Documents</h2>
				<form method="post" action="/upload" enctype="multipart/form-data">
					<input type="file" name="file" required />
					<button type="submit">Upload Document</button>
				</form>
				<p class="upload-info">ğŸ“„ Supports PDF and TXT files | Total documents in system: <strong>{{ total_docs }}</strong></p>
			</section>
			{% endif %}

			<!-- Search Section -->
			<section class="card" id="search-section">
				<h2>ğŸ” Search Campus Resources</h2>
				<form method="get" action="/search">
					<div class="autocomplete">
						<input type="text" name="q" id="query" value="{{ query }}" placeholder="Search for documents, courses, research papers..." autocomplete="off" />
						<div id="suggestions" class="suggestions" hidden></div>
					</div>
					<div>
						<label class="checkbox-label">
							<input type="checkbox" name="prefix" value="1" {% if prefix %}checked{% endif %} />
							Prefix search
						</label>
						<label class="checkbox-label">
							<input type="checkbox" name="filename" value="1" {% if filename %}checked{% endif %} />
							Search filenames
						</label>
					</div>
					<button type="submit">Search Documents</button>
				</form>
			</section>

			<!-- Results Section -->
			<section class="card" id="results-section">
				<h2>ğŸ“‹ Search Results</h2>
				{% if results %}
					<div class="results-grid">
						{% for item in results %}
							<div class="result-card">
								<div class="result-title">{{ item.title }}</div>
								<div class="result-snippet">{{ item.snippet if item.snippet else 'Document content preview not available.' }}</div>
								<div class="result-meta">
									<small>ğŸ“ {{ item.filename }}</small>
									<span class="badge">Score: {{ item.score }}</span>
								</div>
								<div class="result-actions">
									<a href="/files/{{ item.filename }}" target="_blank">Open</a>
									<a href="/files/{{ item.filename }}?download=1">Download</a>
								</div>
							</div>
						{% endfor %}
					</div>
				{% else %}
					<p style="text-align: center; color: #718096; padding: 2rem;">No results found. Try uploading documents or refining your search query.</p>
				{% endif %}
			</section>

			<!-- News Section -->
			<section id="news-section">
				<h2 class="section-title">ğŸ“° Campus News & Events</h2>
				<p class="section-subtitle">Stay updated with the latest happenings around campus</p>
				<div class="news-grid">
					<div class="news-card">
						<div class="news-image">ğŸ“š</div>
						<div class="news-content">
							<h3 class="news-title">New Digital Library Launched</h3>
							<p class="news-description">Access thousands of academic journals, research papers, and e-books through our new digital platform.</p>
						</div>
					</div>
					<div class="news-card">
						<div class="news-image">ğŸ“</div>
						<div class="news-content">
							<h3 class="news-title">Fall Semester Registration</h3>
							<p class="news-description">Registration for fall semester courses is now open. Explore our diverse course catalog and plan your academic journey.</p>
						</div>
					</div>
					<div class="news-card">
						<div class="news-image">ğŸ”¬</div>
						<div class="news-content">
							<h3 class="news-title">Research Excellence Awards</h3>
							<p class="news-description">Celebrating groundbreaking research achievements by our faculty and students across various disciplines.</p>
						</div>
					</div>
					<div class="news-card">
						<div class="news-image">ğŸŒŸ</div>
						<div class="news-content">
							<h3 class="news-title">Student Success Stories</h3>
							<p class="news-description">Inspiring stories of our alumni making a difference in their fields and communities worldwide.</p>
						</div>
					</div>
				</div>
			</section>

			<!-- Gallery Section -->
			<section id="gallery-section" style="margin-top: 4rem;">
				<h2 class="section-title">ğŸ›ï¸ Campus Gallery</h2>
				<p class="section-subtitle">Experience our beautiful campus through these moments</p>
				<div class="gallery-grid">
					<div class="gallery-item">
						<div class="gallery-placeholder">ğŸ«</div>
					</div>
					<div class="gallery-item">
						<div class="gallery-placeholder">ğŸŒ³</div>
					</div>
					<div class="gallery-item">
						<div class="gallery-placeholder">ğŸ“–</div>
					</div>
					<div class="gallery-item">
						<div class="gallery-placeholder">âš¡</div>
					</div>
					<div class="gallery-item">
						<div class="gallery-placeholder">ğŸ¨</div>
					</div>
					<div class="gallery-item">
						<div class="gallery-placeholder">ğŸƒ</div>
					</div>
				</div>
			</section>
		</div>

		<!-- Footer -->
		<footer>
			<div class="footer-container">
				<div class="footer-section">
				<h3>K.R. MANGALAM UNIVERSITY</h3>
				<p>The Complete World of Education</p>
					<p style="margin-top: 1rem;">Empowering minds, shaping futures through innovative learning and research.</p>
				</div>
				<div class="footer-section">
					<h3>Quick Links</h3>
					<ul>
						<li><a href="#about">About Us</a></li>
						<li><a href="#academics">Academics</a></li>
						<li><a href="#research">Research</a></li>
						<li><a href="#campus-life">Campus Life</a></li>
						<li><a href="#contact">Contact Us</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Resources</h3>
					<ul>
						<li><a href="#library">Digital Library</a></li>
						<li><a href="#portal">Student Portal</a></li>
						<li><a href="#calendar">Academic Calendar</a></li>
						<li><a href="#careers">Career Services</a></li>
						<li><a href="#support">IT Support</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Newsletter</h3>
					<p>Stay connected with campus updates</p>
					<form style="margin-top: 1rem;">
						<input type="email" placeholder="Enter your email" style="margin-bottom: 0.5rem;" />
						<button type="submit">Subscribe</button>
					</form>
				</div>
			</div>
			<div class="footer-bottom">
				<p>&copy; 2026 K.R. Mangalam University. All rights reserved. | Privacy Policy | Terms of Service</p>
			</div>
		</footer>

		<script src="{{ url_for('static', filename='script.js') }}"></script>
	</body>
</html>
